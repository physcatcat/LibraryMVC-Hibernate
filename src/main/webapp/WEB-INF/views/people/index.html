<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>All people</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
          crossorigin="anonymous">
</head>
<body>
<div class="container text-center" style="height: 700px; overflow-y: scroll;">
    <table class="table table-light table-hover align-middle caption-top">
        <caption>List of people</caption>
        <thead class="table-dark" style="position: sticky; top:0;">
        <tr>
            <th>Name</th>
            <th>Birth Date</th>
            <th>Phone Number</th>
            <th>Email</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody class="table-group-divider">
        <tr th:each="person : ${people.getContent()}">
            <td th:text="${person.getName()}">name</td>
            <td th:text="${person.getDateInFormat()}">birthDate</td>
            <td th:text="${'+7' + person.getPhoneNumber()}">phoneNumber</td>
            <td th:text="${person.getEmail()}">email</td>
            <td>
                <form th:method="DELETE" th:action="@{/people/{id}(id=${person.getId()})}">
                    <a type="button" class="btn btn-secondary" th:href="@{people/{id} (id=${person.getId()})}">Go to profile</a>
                    <a class="btn btn-dark" th:href="@{people/{id}/edit (id=${person.getId()})}">Edit</a>
                    <input type="submit" class="btn btn-danger" value="Delete"/>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<div class="container">
    <form>
        <nav>
            <ul class="pagination">
                <li class="page-item" th:classappend="${page == 0 ? 'disabled' : ''}">
                    <a class="page-link" th:href="@{/people(page=${page}-1, limit=${limit}, sortBy=${sortBy})}">Previous</a>
                </li>
                <li th:each="pageNum : ${#numbers.sequence(0, people.getTotalPages()-1)}" class="page-item">
                    <a class="page-link" th:classappend="${pageNum == page ? 'active' : ''}" th:href="@{/people(page=${pageNum}, limit=${limit}, sortBy=${sortBy})}" th:text="${pageNum+1}"/>
                </li>
                <li class="page-item" th:classappend="${page == people.getTotalPages()-1 ? 'disabled' : ''}">
                    <a class="page-link" th:href="@{/people(page=${page}+1, limit=${limit}, sortBy=${sortBy})}">Next</a>
                </li>
            </ul>
        </nav>
        <label for="limit">Items per page:</label>
        <select class="form-control" id="limit" name="limit">
            <option value="5" th:selected="${limit == 5}">5</option>
            <option value="10" th:selected="${limit == 10}">10</option>
            <option value="20" th:selected="${limit == 20}">20</option>
        </select>
        <label for="sortBy">Sorting by:</label>
        <select class="form-control" id="sortBy" name="sortBy">
            <option value="name" th:selected="${sortBy.equals('name')}">Name</option>
            <option value="birthDate" th:selected="${sortBy.equals('birthDate')}">Date of birth</option>
        </select>
        <button type="submit" class="btn btn-primary">Confirm</button>
    </form>
    <br/>
    <hr/>
    <a class="btn btn-dark" href="/people/new">New</a>
    <a class="btn btn-dark" href="/books">To book catalog</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
        integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
        crossorigin="anonymous"></script>

</body>
</html>